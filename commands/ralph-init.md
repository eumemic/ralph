---
name: ralph-init
description: Initialize Ralph in the current project with interactive configuration
---

# Initialize Ralph in a Project

Initialize Ralph with interactive configuration to set up your project correctly.

## Step 1: Check if already initialized

First, check if Ralph is already initialized:

```bash
ls -la .ralph 2>/dev/null || echo "NOT_INITIALIZED"
```

If `.ralph/` exists, inform the user that Ralph is already initialized and offer to reconfigure.

## Step 2: Detect project type

Examine the project to detect its type and suggest appropriate defaults. Look for:

```bash
ls package.json pyproject.toml Cargo.toml go.mod pom.xml build.gradle Makefile 2>/dev/null || echo "UNKNOWN"
```

## Step 3: Gather configuration via AskUserQuestion

Use the AskUserQuestion tool to ask the user about their project configuration. Ask these questions:

### Question 1: Shared utilities directory
Based on what you detected:
- Node.js projects: suggest `src/lib`, `src/utils`, or `lib`
- Python projects: suggest `src/lib`, `lib`, or `utils`
- Go projects: suggest `pkg`, `internal/lib`
- Rust projects: suggest `src/lib`
- Other: suggest `src/lib`

Ask: "Where should shared utilities and reusable code live?"

### Question 2: Test command
Based on project type:
- Node.js: `npm test`, `yarn test`, `pnpm test`
- Python: `pytest`, `python -m pytest`, `poetry run pytest`
- Go: `go test ./...`
- Rust: `cargo test`

Ask: "What command runs your tests?"

### Question 3: Typecheck command
Based on project type:
- Node.js/TypeScript: `tsc --noEmit`, `npm run typecheck`
- Python: `mypy .`, `pyright`, `poetry run mypy .`
- Go: `go vet ./...`
- Rust: `cargo check`

Ask: "What command runs type checking?" (allow "None" option)

### Question 4: Lint command
Based on project type:
- Node.js: `eslint .`, `npm run lint`
- Python: `ruff check .`, `flake8`, `poetry run ruff check .`
- Go: `golangci-lint run`
- Rust: `cargo clippy`

Ask: "What command runs linting?" (allow "None" option)

### Question 5: Git automation
Ask: "Enable automatic git push after each build iteration?" (default: No)
Ask: "Enable automatic git tagging on successful builds?" (default: No)

## Step 4: Create directories and files

After gathering answers, create the Ralph structure:

1. Create directories:
```bash
mkdir -p specs .ralph
```

2. Write `.ralph/config.yaml` with the user's choices:
```yaml
# Ralph Configuration
specs_dir: ./specs
shared_utils_dir: [USER'S ANSWER]

# Git automation
auto_push: [true/false based on answer]
auto_tag: [true/false based on answer]
```

3. Write `.ralph/AGENTS.md` with the user's validation commands.

**AGENTS.md is the "heart of the loop"** - it's loaded every iteration and provides operational context to the building agent. Keep it brief (~60 lines max) and operational only.

```markdown
# AGENTS.md

This file is loaded every iteration. Keep it brief and operational.
Status updates belong in IMPLEMENTATION_PLAN.md, not here.

## Build & Run

[Project-specific build instructions]

## Validation

Run these after implementing to get immediate feedback:

- Tests: `[USER'S TEST COMMAND]`
- Typecheck: `[USER'S TYPECHECK COMMAND or "N/A"]`
- Lint: `[USER'S LINT COMMAND or "N/A"]`

## Operational Notes

Succinct learnings about how to RUN the project (gotchas, workarounds):

## Codebase Patterns

Key abstractions and conventions (update as patterns emerge):

```

4. Write `.ralph/IMPLEMENTATION_PLAN.md`:
```markdown
# Implementation Plan

*This file is generated by `ralph plan`. Do not edit manually.*

Run the planning loop to generate tasks:

```bash
ralph plan
```
```

## Step 5: Confirm success

Tell the user what was created and the next steps:

1. Write their first spec in `specs/`
2. Run `ralph plan` to generate the implementation plan
3. Run `ralph build` to implement tasks one at a time
